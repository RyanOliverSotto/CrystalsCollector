<!DOCTYPE html>
<html lang="en">

<head>
    <!--These are the default metas created by Visual Studio-->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Project Management Game</title>
    <!--Adding the reset css-->
    <link type="text/css" rel="stylesheet" href="assets/css/reset.css">
    <!--Adding the src for JQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js"></script>
    <!--Adding the src for Bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
        crossorigin="anonymous">
    <!--Adding the src for Font Awesome-->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--Adding the link for Google Icons-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!--Adding the src for our Bootcamp driven styling-->
    <link type="text/css" rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css?family=Bungee|Michroma" rel="stylesheet">
</head>

<body onload="initiateProject();">
    <div class="container">
        <div class="jumbotron" style="background-color: dodgerblue;">
            <div class="page-header">
                <h1>Project Management the Game</h1>
                <h2>Can you deliver a quality project on time, in scope, and on budget?</h2>
            </div>
        </div>
    </div>
    <div class="container" style="background-image: url("https://blog.teamviewer.com/wp-content/uploads/2016/12/best-project-management-tool.jpg")">
        <div class="panel panel-default">
            <div class="panel-heading">
                    <h2 class="alert alert-info"><strong>Game Rules</strong></h2>
            </div>
            <div class="panel-body">
                <p>You will be given a random number at the start of the game.</p>
                <p>There are four buttons below. By clicking on the button you will add a specific amount of points to your
                    total score.</p>
                <p>You win the game by matching your total score to the random number. You lose the game if your total score
                    goes above the random number.</p>
                <p>The value of each button is hidden from you until you click it.</p>
                <p>Each time the game starts, the game will change the values of each button and assign a new target goal.</p>
            </div>
        </div>
    </div>
    <div class="container" >
            <div class="row">
                    <div class="col-sm-6">
                            <div class="panel panel-default">
                                    <div class="panel-heading">
                                            <h2 class="alert alert-info"><strong>Project Target</strong></h2>
                                    </div>
                                    <div class="panel-body">
                                        <h3 class="panel-body"id="projectTarget">0</h3>
                                    </div>
                            </div>
                            <div class="panel panel-default">
                                    <div class="panel-heading">
                                            <h2 class="alert alert-info"><strong>Project Execution</strong></h2>
                                    </div>
                                    <div class="panel-body">
                                        <h3 class="panel-body"id="projectExecution">0</h3>
                                    </div>
                            </div>
                            <div class="panel panel-default">
                                    <div class="panel-heading">
                                            <h2 class="alert alert-info"><strong>Project Status</strong></h2>
                                    </div>
                                    <div class="panel-body">
                                        <h3 class="panel-body" id="projectStatus">Status: Project in planning phase.</h3>
                                        <h3 class="panel-body" id="projectSuccess">Successful Projects: 999</h3>
                                        <h3 class="panel-body" id="projectFails">Failed Projects: 9</h3>
                                    </div>
                            </div>
                    </div>
                    
                    <div class="col-sm-6">
                        <div class="container">
                                <button id="btn0" type="button" class="btn btn-primary btn-block" value=null style="margin-bottom: 40px;">
                                SCOPE</button>
                                <button id="btn1" type="button" class="btn btn-success btn-block"value=null style="margin-bottom: 40px;">
                                TIME</button>
                                <button id="btn2" type="button" class="btn btn-info btn-block" value=null style="margin-bottom: 40px;">
                                COST</button>
                                <button id="btn3" type="button" class="btn btn-warning btn-block" value=null style="margin-bottom:40px;">
                                QUALITY</button>
                        </div>
                    </div>
            </div>
    </div>

    <script text="text javascript">
        /* Begin the local javascript here.*/
        // Declare the global variable here
        let projectSuccess = 0;
        let projectFails = 0;
        let arrayButton = new Array();
        let projectStarted = false;
        let projectTarget = 0;
        let projectExecute = 0;

        /*
        Populate the target goals with Math Randoms for each of the buttons and set the display to game ready
        */
        function initiateProject() {
            projectExecute = 0;
            projectTarget = Math.floor(Math.random() * (120 - 19 + 1)) + 19;
            console.log("Project Target:", projectTarget);
            $("#projectTarget").text(projectTarget);
            $("#projectStatus").text("Status: Project not started");
            $("#projectSuccess").text("Successful Projects: " + projectSuccess);
            $("#projectFails").text("Failed Projects: " + projectFails);
            $("#projectExecution").text(projectExecute);
            $("#btn0").attr("value", parseInt(Math.floor(Math.random() * 12) + 1));
            $("#btn1").attr("value", parseInt(Math.floor(Math.random() * 12) + 1));
            $("#btn2").attr("value", parseInt(Math.floor(Math.random() * 12) + 1));
            $("#btn3").attr("value", parseInt(Math.floor(Math.random() * 12) + 1));
        }

        $(".btn").on("click", function () {
            //alert("I was clicked!");
            projectStarted = true;
            var myNum = parseInt(this.value);
            projectExecute+=myNum;
            console.log ("This.value ", parseInt(this.value));
            console.log ("myNum ", myNum)
            //projectScore = parseInt($(this).value) + projectScore;
            console.log ("Type of PS:", typeof(projectExecute));
            console.log ("Type of myNum:", typeof(myNum));
            console.log ("Project Score: ", projectExecute)
            console.log("myNum:", myNum);
            //$("#projectExecution").html("<p>"+ projectExecute + "</p>");
            $("#projectStatus").text("Status: Project is active");
            //$("#projectExecution").text(this.value);
            $("#projectExecution").text(projectExecute);

            if (projectExecute === projectTarget){
                projectClosure();
            }
            else if (projectExecute > projectTarget){
                lessonsLearned();
            }

        });
        function projectClosure(){
            projectSuccess++;
            $("#projectSuccess").text("Successful Projects: " + projectSuccess);            
            $("#projectStatus").text("Status: Project is closed.");
            wait(100);
            alert("Project success! You were able to deliver a quality project on time, on budget, and within scope! Let's document the lessons learned for what worked well!!");
            initiateProject();
        }
        function lessonsLearned(){
            projectFails++;
            $("#projectFails").text("Failed Projects: " + projectFails);     
            $("#projectStatus").text("Status: Project is closed.");      
            wait(100);             
            alert("Project was delivered late, over budget, with poor quality and scope. Let's document the lessons learned so we do better next time!");
            initiateProject();
        }

            function wait(ms) {
                var start = new Date().getTime();
                var end = start;
                while (end < start + ms) {
                    end = new Date().getTime();
                }
}
    /*
    Taken directly from the homework requirements.
    The player will have to guess the answer, just like in Word Guess. This time, though, the player will guess with numbers instead of letters.
    Here's how the app works:
    There will be four crystals displayed as buttons on the page.
    The player will be shown a random number at the start of the game.
    When the player clicks on a crystal, it will add a specific amount of points to the player's total score.
    Your game will hide this amount until the player clicks a crystal.
    When they do click one, update the player's score counter.
    The player wins if their total score matches the random number from the beginning of the game.
    The player loses if their score goes above the random number.
    The game restarts whenever the player wins or loses.
    When the game begins again, the player should see a new random number. Also, all the crystals will have four new hidden values. Of course, the user's score (and score counter) will reset to zero.
    The app should show the number of games the player wins and loses. To that end, do not refresh the page as a means to restart the game.
    Option 1 Game design notes
    The random number shown at the start of the game should be between 19 - 120.
    Each crystal should have a random hidden value between 1 - 12.

    Pseudocode Division
    ________________________________________________________________________________________________
    REM: This will be a project management themed game, but I am keeping the crystals title for the time
    being. The four pillars will be:
    #1 Complete visibility of resources and project timelines
    #2 Allocating the right person for the job
    #3 Optimizing the utilization levels of all resources
    #4 Forecasting future resource requirements

    We will need to have several behaviors happen on the onLoad event of the body.
    We will use mathRandom to assign a hidden value between 1 to 12 for each of the pillars.
    We will use mathRandom to assign a visible value as our target between 19 to 120.
    We will set the wins and losses to zero.
    Set a flag varaible to the boolean value of false;

    Because this is an exercise in JQuery, classes will be important. The pillars will be of the same
    class so that a listener that we create when a click event occurs will be able to handle
    the cascade of events to follow and process the click occurrance.

    We will need a update document function to show the results of the click.

    We will need a function to evaluate the click event.

    We will need 2 functions to check for either a win or lose state.

    If true win or lose condition is met, reset the game but preserve the scores.

    End Pseudocode Division
    ________________________________________________________________________________________________*/



    </script>
</body>
<!--End the body tag-->

</html>